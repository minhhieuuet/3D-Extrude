<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>3D Extrude</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.lazyload/1.9.1/jquery.lazyload.min.js"></script>
<script>
$(function() {
    $("img.lazy").lazyload({effect : "fadeIn"});
});
</script> 
</head>
<body>
  <h2>3D Extrude</h2>
  <select id="tag" onchange="handleSelect()">
    <option selected="selected" value="substance_painter">Substance Painter</option>
    <option value="substance_designer">Substance Designer</option>
    <option value="smart_material">Smart Material</option>
    <option value="full_video">Full Video</option>
    <option value="autodesk_maya">Autodesk Maya</option>
    <option value="zbrush">Zbrush</option>
    <option value="3d_modeling">3D Modeling</option>
    <option value="free_files">Free Files</option>
    <option value="tutorial">Tutorial</option>
    <option value="poll">Poll</option>
  </select>
  <table>
    <thead>
      <th>No</h>
      <th>Title</th>
      <th>Thumbnail</th>
      <th>Youtube</th>
    </thead>
    <tbody id="table-body">

    </tbody>
  </table>
</body>
<script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.4/dist/lazyload.min.js"></script>
<script>
 
  window.addEventListener('load', async function () {
    await handleSelect();
  })
  const handleSelect = async () => {
    const value = document.querySelector('#tag').value;
    const data = await fetch(`${value}.json`).then(res => res.json());
    document.querySelector('#table-body').innerHTML = '';
    data.forEach((value, index) => { 
      if(value.url) {
        value.thumbnail = `https://img.youtube.com/vi/${value.url.replace('https://youtu.be/', '')}/0.jpg`;
        if(value.url.includes("v=")) {
          const params = new URLSearchParams(value.url.replace("https://www.youtube.com/watch", ""));
           value.thumbnail = `https://img.youtube.com/vi/${params.get("v")}/0.jpg`;
        }
      }
      document.querySelector('#table-body').innerHTML += `
      <tr>
        <td>${index + 1}</td>
        <td>${value.title}</td>
        <td><img class="lazy" data-original="${value.thumbnail}" alt="" width="500px"></td>
        <td><a href="${value.url}" target="_blank">Youtube</a></td>
      </tr>`
    });
    $("img.lazy").lazyload({effect : "fadeIn"});
  }
</script>
</html>